<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<title>game</title>
	<style>
	*{
		padding: 0;
		margin:0;
	}
	#wrap{
		width: 480px;
		margin: 20px auto;
		border: 3px inset rgba(125,32,44,0.5);
		padding: 5px 10px;
		box-shadow:  inset 0  0 400px rgba(122,55,23,0.4);
	}
	#nav{
		width: 100%;
	}
	#nav::after{
		content: "";
		clear: both;
		display: block;
	}
	#time{
		float: left;
	}
	#score{
		float: right;
	}
	#content{
		width: 100%;
		height: 640px;

	}
	#bigText{
		text-align: center;
		font-size: 280px;
		-webkit-user-select: none;
		user-select: none;
		-webkit-font-smoothing:antialiased;
		font-family: Wawati SC;
	}
	#smallTexts{
		font-size: 60px;
		margin-top: 80px;
		text-align: center;
		-webkit-user-select: none;
		user-select: none;
		-webkit-font-smoothing:antialiased;

	}
	#smallTexts span{
		border: 2px solid transparent;
		transition: 0.2s;
		text-shadow:  0 3px 3px grey;
		-webkit-user-select: none;
		user-select: none;
	}
	#smallTexts span:hover{
		font-size: 65px;
		cursor: pointer;
		box-sizing: border-box;

		/*border:  2px solid rgba(222,22,22,0.5);*/

	}
	#intro{
		/*text-indent: 2em;*/
		padding: 0px 15px;
		margin-left: 20px;
	}
</style>
</head>
<body>
	<!-- 容器 -->
	<div id="wrap">
		<!-- 头部 -->
		<div id="nav">
			<div id="time">倒计时:60s</div>
			<div id="score">得分:0</div>
		</div>
		<!-- content -->
		<div id="content">
			<div id="bigText">黄</div>
			<div id="intro">
				根据上面的字的颜色从下面选择正确的字,选择正确自动开始
			</div>
			<!-- 小字 -->
			<div id="smallTexts">
				<span class="text">黄</span>
				<span class="text">蓝</span>
				<span class="text">红</span>
				<span class="text">绿</span>
				<span class="text">黑</span>
			</div>
			<button id="btn">重新开始</button>
		</div>
	</div>
</body>
<script>
	//声明变量
	var timeDiv = document.getElementById('time');
	var scoreDiv = document.getElementById('score');
	var bigText = document.getElementById('bigText');
	var btn = document.getElementById('btn');
	var smallTexts = document.getElementsByClassName('text');
	/*随机生成内容
	数组长度为5 元素取值范围 [0,4] 元素不重复*/
	var charArr= ['黄','红','蓝','黑','绿'];//须一一对应
	var colorArr = ['yellow','red','blue','black','green'];//最后要用下标判断正确与否
	//生成随机数
	function randomNumber(x,y){
		return Math.round(Math.random()*(y-x)+x)
	}
	//生成一个下标数组
	function randomIndex(){
		var a = [];
		while(a.length<5){
			var arrNum = randomNumber(0,4);
			if(a.indexOf(arrNum)<0){
				a.push(arrNum);
			}
		}
		return  a;
	}
	//大字颜色
	function createColor(){
		var bigCharIndex = randomNumber(0,4);//下标
		bigText.innerText = charArr[bigCharIndex];//根据随机的下标取出字,为bigText设置文本内容
		var bigCharIndex = randomNumber(0,4);//下标
		bigText.style.color = colorArr[bigCharIndex];//根据随机的下标取出字,为bigText设置颜色,

		//生成两个随机下标数组,用来判断答案正误
		var charIndexArr = randomIndex();
		var colorIndexArr = randomIndex();
		for(var i =0 ;i < colorIndexArr.length;i++){
			//小字          
			smallTexts[i].innerText = charArr[charIndexArr[i]];
			//小字颜色
			smallTexts[i].style.color = colorArr[colorIndexArr[i]];
		}
	}
	createColor();
	
	// 立一个flag;
	var flag='0';
	//为每一个小字绑定点击事件
	function game(){
		var scoreNum=0;
		var timing = 60;
		for(var j = 0; j< smallTexts.length;j++){
			//绑定
			smallTexts[j].onclick = function (){
				//获取当前点击的小字
				var thisChar = this.innerText;
				//获取当前点击的小字在charArr里的位置
				var indexOfSmallText = charArr.indexOf(thisChar);
				//获取大字的颜色
				var bigColor = bigText.style.color;
				//获取大字颜色在colorArr里的位置
				var indexOfBigColor = colorArr.indexOf(bigColor);
				createColor();
				console.log(thisChar);
				if(indexOfSmallText == indexOfBigColor){
					scoreNum++;
					scoreDiv.innerText = "得分:"+scoreNum;
					if(flag=='0'){
						var timer = setInterval(function(){
							timing--;
							//时间为0 提示时间到游戏结束
							timeDiv.innerText="倒计时:"+timing+"s";
							if(timing<0){
								smallTexts[0].innerText="游";
								smallTexts[1].innerText="戏";
								smallTexts[2].innerText="结";
								smallTexts[3].innerText="束";
								smallTexts[4].innerText="!";
								alert("游戏结束,得分:"+scoreNum+"!");
								timeDiv.innerText="倒计时:0s";
								//清空所有点击事件
								for(var j = 0;j < smallTexts.length; j++){
									smallTexts[j].onclick = null;
								}
								clearInterval(timer);
							}
							flag='1';},1000);
					}
				}else{
					scoreNum--;
					scoreDiv.innerText = "得分:"+scoreNum;
				}
			}
		}
	}
	game();

</script>
</html>