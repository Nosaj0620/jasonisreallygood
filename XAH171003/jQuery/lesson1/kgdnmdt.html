<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="UTF-8">
		<title>开关灯</title>
		<style type="text/css">
			body {
				background-color: black;
			}
		</style>
	</head>

	<body>
		<div id="wrap"></div>
		<button id="btn1">初级</button>
		<button id="btn2">高级</button>
		<button id="btn3">超高级</button>
	</body>
	<script type="text/javascript" src="../jquery-3.2.1.min.js"></script>
	<script type="text/javascript">
		var arr = [];
		var colNum = 10; //行数量
		var rowNum = 10; //列数量
		var itemWidth = 70; //单元格宽度
		var itemHeight = 70; //单元格高度
		//用jq设置css样式呵呵真厉害- -|||
		$('*').css({
			'padding': '0',
			'margin': '0'
		})
		$('#wrap').css({ //设置父级盒子的宽高
			'margin': '150px auto',
			'font-size': ' 0',
			'width': '600px',
			'height': '600px',
			'background-image': ' url(6. png)',
			'position': 'relative',
		});
		creatDiv(); //初始化游戏
		$('#btn1').click(function() {
			colNum = 5;
			rowNum = 5;
			itemWidth = 120;
			itemHeight = 120;
			creatDiv();
		});
		$('#btn2').click(function() {
			colNum = 12;
				rowNum = 12;
				itemWidth = 50;
				itemHeight = 50;
				creatDiv();
		});
		$('#btn3').click(function() {
			colNum = 20;
			rowNum = 20;
			itemWidth = 30;
			itemHeight = 30;
			creatDiv();
		});

		function creatDiv() {
			//清空上局游戏
			wrap.innerHTML = '';
			arr = [];
			for(i = 0; i < colNum * rowNum; i++) {
				var newDiv = $('<div></div>');
				$('#wrap').append(newDiv);
				arr.push(newDiv[0]);

			}
//			console.log(newDiv);
//			console.log(arr);
			//设置刚创建的div的样式
			$('#wrap div').css({
				'width': itemWidth + 'px',
				'height': itemHeight + 'px',
				'display': 'inline-block',
				'background': 'black',
				'box-shadow': 'inset  0 0 8px skyblue',
				'transition': '  0.2s'
			});
			//设置每个div的hover效果
			$('#wrap div').hover(function() {
				$(this).css("box-shadow", "inset 0 0 25px rgba(255, 255, 210,0.8)");
//				$(this).css("border-radius", "15%");
			}, function() {
				$(this).css("box-shadow", "inset 0 0 8px skyblue");
//				$(this).css("border-radius", "0%");

			});
			//重新计算wrap的宽高
			$('#wrap').css('width', $('#wrap div').width() * colNum + 'px');
			$('#wrap').css('height', $('#wrap div').height() * rowNum + 'px');
			$('#wrap div').click(function() {
				divClick(this);
			});
		}

		function divClick(x) {
			var thisIndex = arr.indexOf(x); //获取当前点击的DIV的位置
			judgeBg(x); //根据背景色判断开关灯
			//排除掉最上面一行元素,判断其他元素的上方元素
			if(thisIndex > colNum - 1) {
				judgeBg(arr[thisIndex - colNum]); 
			}
			if(thisIndex < rowNum * colNum - colNum) {
				judgeBg(arr[thisIndex + colNum]); 
			}
			if(thisIndex % colNum != 0) {
				judgeBg(arr[thisIndex - 1]); 
			}
			if((thisIndex + 1) % colNum != 0) {
				judgeBg(arr[thisIndex + 1]); 
			}
		}

		function judgeBg(a) { //背景色判断
			if($(a).css('background-color') == 'rgb(0, 0, 0)') {
				$(a).css('background-color', 'skyblue');
			} else {
				$(a).css('background-color', 'black');
			}
		}
	</script>

</html>